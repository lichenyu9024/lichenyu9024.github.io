# Vim 入门教学

## 了解 Vim 的操作模式

### 普通模式（Normal Mode）

这是默认模式，你可以在其中执行各种命令，如移动光标、复制、粘贴、删除等。

在普通模式下，按下键不会直接输入文本，而是触发命令。你可以按下 Esc 键进入普通模式。

### 插入模式（Insert Mode）

在插入模式下，你可以输入文本，有多种方式可以进入插入模式，如按下 i、I、a、A、o、O 等键。

在插入模式中，按键会直接输入文本。

### 可视模式（Visual Mode）

在可视模式下，你可以选择文本块以进行复制、剪切或其他编辑操作。

你可以按下 v、V 或 Ctrl-v 键进入不同类型的可视模式。

### 命令行模式（Command-Line Mode）

在命令行模式下，你可以执行各种命令，如保存文件、退出 Vim、查找替换等。

你可以按下冒号:键来进入命令行模式。

## 使用 Vim 创建或编辑文件

终端运行命令（如果文件不存在，则会创建文件）

```
vim filename.txt
```

## 普通模式（Normal Mode）

导航光标

```
h 或 ←        向左移动光标。
j 或 ↓        向下移动光标。
k 或 ↑        向上移动光标。
l 或 →        向右移动光标。

<数字>移动方向  指定距离和方向移动光标
向左移动6个字符： 6h 或 6←
向右移动10个字符：10l 或 10→
向上移动5行：    5k 或 5↑
向下移动3行：    3j 或 3↓
```

快速移动

```
w       跳到下一个单词的开头。
b       跳到前一个单词的开头。
e       跳到当前或下一个单词的结尾。
0       跳到当前行的开头。
$       跳到当前行的结尾。
^       跳到当前行的第一个非空白字符。
gg      移动到文件首行
G       移动到文件结尾
<数字>G  移动到指定行
:<数字>  移动到指定行（命令行模式）
```

复制、剪切和粘贴

复制（yank）

```
y        复制所选择的文本（可视模式）
yy       复制一行（当前光标所在行）
<数字>yy  向下复制n行
```

删除（delete）

- 删除的内容会放到剪贴板，所以删除命令也等同于剪切命令

```
x(小写)   删除光标位置的字符，多次按下可以连续删除多个字符
X(大写)   删除光标位置的前一个字符
d        剪切所选择的文本（可视模式）
dd       剪切当前行
<数字>dd  剪切n行
```

粘贴（paste）

```
p(小写)  将剪切的文本粘贴在光标位置的后面
P(大写)  将剪切的文本粘贴在光标位置的前面
```

高级用法

```
yw             复制从光标位置到下一个单词的开头
ye             复制从光标位置到当前或下一个单词的结尾
yb             复制从光标位置到前一个单词的开头
y0             复制从光标位置到行的开头
Y(大写)         复制从光标位置到行的结尾
yf<内容>       复制从光标位置到第一个匹配内容之间的内容，例：yfA（复制光标到第一个大写A之间的内容）
y<数字>f<内容>  复制从光标位置到第n个匹配内容之间的内容，例：y2fA（复制光标到第2个大写A之间的内容）

dw           删除从光标位置到下一个单词的开头
de           删除从光标位置到当前或下一个单词的结尾
db           删除从光标位置到前一个单词的开头
d0           删除从光标位置到行的开头
D(大写)       删除从光标位置到行的结尾
df<内容>      删除从光标位置到出现的第一个匹配内容
```

更改行

```
>>  向右移动本行一段距离
<<  向左移动本行一段距离
:m+ 或 :m +1  将本行向下移动一行(可以修改数字指定行数)
:m-- 或 :m -2  将本行向上移动一行(可以修改数字指定行数)
```

更改文本

- 删除一段文本并进入插入模式

```
c       更改所选择的文本（可视模式）
cc      更改整行
cw      更改从光标位置到当前单词的结尾的文本
C(大写)  更改从光标位置到行尾的文本
```

撤销和重做

```
u       撤销上一个操作。
<数字>u  撤销n次
Ctrl-r  重做被撤销的操作。
```

查找文本

```
/   进入查找模式，输入关键字并按下 Enter 来查找文本。
n   跳转到下一个匹配项。
N   跳转到上一个匹配项。

```

替换文本

```
:%s/要查找的文本/要替换的文本/g

%s            表示在整个文件中查找并替换。
/要查找的文本/  是要查找的文本内容。
/要替换的文本/  是要替换的文本内容。
g             表示全局替换，即一行中有多个匹配项时都会被替换。如果省略 g，只会替换每行的第一个匹配项。

:%s/要查找的文本/要替换的文本/gc
每次替换都进行确认，在这种模式下，Vim会逐个显示匹配项并要求你确认是否要替换。
```

分屏

```
:split 或 :sp       水平分割屏幕
:vsplit 或 :vsp     垂直分割屏幕
Ctrl-w + 箭头键      在分割屏幕之间切换
```

屏幕滚动：

```
Ctrl + u  向上滚动半个屏幕。
Ctrl + d  向下滚动半个屏幕。
Ctrl + b  向上滚动一个屏幕。
Ctrl + f  向下滚动一个屏幕。
```

## 命令行模式（Command-Line Mode）

保存文件

```
:w           保存当前文件。
:w filename  将当前文件另存为指定的文件名（filename）。
```

退出 Vim

```
:q    退出 Vim，如果有未保存的更改，会提示保存。
:q!   强制退出 Vim，不保存更改。
:wq   保存文件并退出 Vim。
:wq!  强制保存文件并退出 Vim（用于修改只读文件，只有文件所有者才能使用）。
```

打开文件：

```
:ls            列出当前打开的缓冲区列表。
:e filename    打开指定文件名（filename）的文件。
```

## 插入模式（Insert Mode）

在普通模式（Normal Mode）下按下以下键之一来进入插入模式

```
i：在光标前插入文本。
I：在当前行的开头插入文本。
a：在光标后插入文本。
A：在当前行的末尾插入文本。
o：在当前行的下方插入一个新行，并进入插入模式。
O：在当前行的上方插入一个新行，并进入插入模式。
```

## 可视模式（Visual Mode）

在普通模式下按下以下键之一来进入可视模式，用于选择文本

```
v：按字符选择。
V：按行选择。
```
